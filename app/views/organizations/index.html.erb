<div class = "header-container" >
  <h2>VANCOUVER TECH HUB</h2>
  <p>Discover exciting companies, find local meet-ups and host events</p>
</div>

<div>
  <div id="map" style='height: 280px;'></div>
</div>

<script type="text/javascript">
var initialize = function() {
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: { scrollwheel: false, zoomControl: true }, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(<%= raw organizations_json(@organizations).to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
}

google.maps.event.addDomListener(window, 'resize', initialize);
google.maps.event.addDomListener(window, 'load', initialize);
google.maps.event.addDomListener(window, 'page:load', initialize);

</script>
<br>
<%= react_component "OrganizationsDisplay", organizations: @organizations %>

<!-- TODO: Change searches below to input_tags, put in partial -->
<!-- Search Bar -->
<!-- <input id="organization-search" type="text" class="form-control" placeholder="Search" name="search"> -->

<!-- Tech Stacks -->
<%= select_tag :technologies, options_for_select(@technologies.each.map{|stack| stack.name}), class: "chosen-select form-control", id: "tech-stacks", multiple: true, data: {placeholder: "Tech Stacks (Max 3)"} %>

<!-- Team Size Filter -->
<select id="team-size" class="form-control ">
  <option value="0"> Team Size </option>
  <option value="1"> Under 250 </option>
  <option value="2"> 251 - 500 </option>
  <option value="3"> Above 500 </option>
</select>

<br><br /><br /><br />

<!-- Container to list Organizations -->
<div class="container-fluid text-center">
  <div class="row">
    <% @organizations.each do |organization| %>
    <a href="<%= organization_path(organization) %>">
    <div class="org-container col-lg-3 col-md-4 col-sm-6 col-xs-12" data-id="<%=organization.id%>" >
      <img src="<%= organization.logo%>" id="org-logo"/>
      <h3><%= link_to organization.name, organization_path(organization), class: "link-to-org" %></h3>
      <p><%= organization.employee_count %> Employees</p>
    </div>
    </a>
    <% end %>
  </div>
</div>

<!-- Pagination for Organizations -->
<div class="container-fluid text-center">
  <%= paginate @organizations %>
</div>
<div class="container-fluid text-center">
  <%= page_entries_info @organizations %>
</div>

<!-- Restrict to three tech stacks -->
<script>
  $(".chosen-select").chosen({ max_selected_options: 3 });
</script>
